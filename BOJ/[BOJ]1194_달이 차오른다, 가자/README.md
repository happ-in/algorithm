# [백준 1194번: 달이 차오른다, 가자. 🌕](https://www.acmicpc.net/problem/1194)

### sudo ✍️  
크크 😁 이 문제는 내가 골랐는데 제목 보자마자 장기하와 얼굴들 노래가 음성 지원됐기 때문이다. 사실 readme 작성 중인 지금 듣고 있다 🎵 뮤직... 이즈.. ㅁr이...ㄹr잎..  

<br>

아무튼 이 문제 푸는데 생각보다 시간이 오래 걸리진 않았다. 골드 1인 이유는 음... 방문체크 때문인거 같다!  
전형적인 bfs 문젠데 key를 획득하고 말고에 따라서 방문체크가 달라지는 것을 처리해주는게 조금 더 진화된 bfs? 였다!  
여기서 키 포인트는 **key 획득 여부를 비트마스크로 체크하고 visited 배열 인덱스로 사용** 한다는 것이다!  

<br>

#### 아이디어  
1. 민석이 위치를 찾는다.
2. 민석이가 이동하는 경우를 q에 넣고 bfs 돌린다
    * 이동 불가능한 경우
        * 벽이 있는 경우
        * 이미 방문한 경우 
        * 문을 만났을 때 열쇠가 없는 경우
    * 이동 가능한 경우
        * 열쇠가 있는 경우
        * .인 경우
3. 결과 출력
    * 출구를 찾으면 이동 횟수 출력
    * 아무리 이동해도 출구를 못 찾으면 -1 출력

<br>

### algoritm 💻
1. 민석이 위치를 찾는다.
```java
for (int j = 0; j < M; j++) {
    if (s.charAt(j) == '0') {
        q.add(new Pos(i, j, 0, 0));
    }
}
```

2. 민석이가 이동하는 경우로 bfs 시작
```java
while (!q.isEmpty()) {
    Pos now = q.poll();
    for (int i = 0; i < 4; i++) {
        int nx = now.x + dx[i];
        int ny = now.y + dy[i];

        // 1. 이동이 불가능한 경우 
        // 벽이 있거나 이미 방문한 경우
        if (nx, ny 범위 out || map[nx][ny] == '#' || visited[nx][ny][now.key]) continue;

        // 문을 만났을 때 열쇠가 없는 경우
        if (map[nx][ny] >= 'A' && map[nx][ny] <= 'F' && (now.key & (1<<map[nx][ny]-'A')) == 0) continue;

        ...

        // 2. 이동 가능한 경우
        // 열쇠가 있는 경우
        if (map[nx][ny] >= 'a' && map[nx][ny] <= 'f') {
            // 키를 획득하고 방문 여부 체크
            // 큐에 현재 위치 상태 담기
        } else {
        // .인경우
            // 방문 여부 체크
            // 큐에 현재 위치 상태 담기
        }
    }
}
```

3. 결과 출력
    * 출구를 찾으면 이동 횟수 출력
    ```java
    if (map[nx][ny] == '1') {
        System.out.println(now.time + 1);
        return;
    }
    ```

    * 아무리 이동해도 출구를 못 찾으면 -1 출력
    ```java
    // 큐가 비었는데 출구를 못 찾음
    System.out.println(-1);
    ```

<br>

### toughts 🌵  
이 문제를 풀고 사실 좀 기뻤다. 
왜냐하면 작년 삼성SDS 알고리즘 특강 들을 때보다 한단계 성장한 느낌도 들고 그 때는 비트마스킹을 이제는 다룰 줄 알게 된 것 같다!고 느꼈기 떄문이다! 딱 1년 전 이 맘때 쯤의 내 알고리즘 실력을 생각하면 아찔하다. bfs/dfs도 모르고 재귀도 제대로 이해 못했던걸로 기억한다. 바보였다 푸하하!  
알고리즘은 역시 계속 풀어봐야하는 거 같다. dp도 좀 잘하고 싶은데... 우선 목표는 그래프 마스터! 그래프 문제 재밌어.. 코쓱.,🥳🥳